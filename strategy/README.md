<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# strategy

```go
import "github.com/cinar/indicator/v2/strategy"
```

Package strategy contains the strategy functions.

This package belongs to the Indicator project. Indicator is a Golang module that supplies a variety of technical indicators, strategies, and a backtesting framework for analysis.

### License

```
Copyright (c) 2021-2024 Onur Cinar.
The source code is provided under GNU AGPLv3 License.
https://github.com/cinar/indicator
```

### Disclaimer

The information provided on this project is strictly for informational purposes and is not to be construed as advice or solicitation to buy or sell any security.

## Index

- [Constants](<#constants>)
- [func ActionSources\(strategies \[\]Strategy, snapshots \<\-chan \*asset.Snapshot\) \[\]\<\-chan Action](<#ActionSources>)
- [func ActionsToAnnotations\(ac \<\-chan Action\) \<\-chan string](<#ActionsToAnnotations>)
- [func ComputeWithOutcome\(s Strategy, c \<\-chan \*asset.Snapshot\) \(\<\-chan Action, \<\-chan float64\)](<#ComputeWithOutcome>)
- [func CountActions\(acs \[\]\<\-chan Action\) \(int, int, int, bool\)](<#CountActions>)
- [func CountTransactions\(ac \<\-chan Action\) \<\-chan int](<#CountTransactions>)
- [func DenormalizeActions\(ac \<\-chan Action\) \<\-chan Action](<#DenormalizeActions>)
- [func NormalizeActions\(ac \<\-chan Action\) \<\-chan Action](<#NormalizeActions>)
- [func Outcome\[T helper.Number\]\(values \<\-chan T, actions \<\-chan Action\) \<\-chan float64](<#Outcome>)
- [type Action](<#Action>)
  - [func \(a Action\) Annotation\(\) string](<#Action.Annotation>)
- [type AndStrategy](<#AndStrategy>)
  - [func NewAndStrategy\(name string\) \*AndStrategy](<#NewAndStrategy>)
  - [func \(a \*AndStrategy\) Compute\(snapshots \<\-chan \*asset.Snapshot\) \<\-chan Action](<#AndStrategy.Compute>)
  - [func \(a \*AndStrategy\) Name\(\) string](<#AndStrategy.Name>)
  - [func \(a \*AndStrategy\) Report\(c \<\-chan \*asset.Snapshot\) \*helper.Report](<#AndStrategy.Report>)
- [type Backtest](<#Backtest>)
  - [func NewBacktest\(repository asset.Repository, outputDir string\) \*Backtest](<#NewBacktest>)
  - [func \(b \*Backtest\) Run\(\) error](<#Backtest.Run>)
- [type BuyAndHoldStrategy](<#BuyAndHoldStrategy>)
  - [func NewBuyAndHoldStrategy\(\) \*BuyAndHoldStrategy](<#NewBuyAndHoldStrategy>)
  - [func \(\*BuyAndHoldStrategy\) Compute\(snapshots \<\-chan \*asset.Snapshot\) \<\-chan Action](<#BuyAndHoldStrategy.Compute>)
  - [func \(\*BuyAndHoldStrategy\) Name\(\) string](<#BuyAndHoldStrategy.Name>)
  - [func \(b \*BuyAndHoldStrategy\) Report\(c \<\-chan \*asset.Snapshot\) \*helper.Report](<#BuyAndHoldStrategy.Report>)
- [type MajorityStrategy](<#MajorityStrategy>)
  - [func NewMajorityStrategy\(name string\) \*MajorityStrategy](<#NewMajorityStrategy>)
  - [func NewMajorityStrategyWith\(name string, strategies \[\]Strategy\) \*MajorityStrategy](<#NewMajorityStrategyWith>)
  - [func \(a \*MajorityStrategy\) Compute\(snapshots \<\-chan \*asset.Snapshot\) \<\-chan Action](<#MajorityStrategy.Compute>)
  - [func \(a \*MajorityStrategy\) Name\(\) string](<#MajorityStrategy.Name>)
  - [func \(a \*MajorityStrategy\) Report\(c \<\-chan \*asset.Snapshot\) \*helper.Report](<#MajorityStrategy.Report>)
- [type OrStrategy](<#OrStrategy>)
  - [func NewOrStrategy\(name string\) \*OrStrategy](<#NewOrStrategy>)
  - [func \(a \*OrStrategy\) Compute\(snapshots \<\-chan \*asset.Snapshot\) \<\-chan Action](<#OrStrategy.Compute>)
  - [func \(a \*OrStrategy\) Name\(\) string](<#OrStrategy.Name>)
  - [func \(a \*OrStrategy\) Report\(c \<\-chan \*asset.Snapshot\) \*helper.Report](<#OrStrategy.Report>)
- [type Result](<#Result>)
- [type SplitStrategy](<#SplitStrategy>)
  - [func NewSplitStrategy\(buyStrategy, sellStrategy Strategy\) \*SplitStrategy](<#NewSplitStrategy>)
  - [func \(s \*SplitStrategy\) Compute\(snapshots \<\-chan \*asset.Snapshot\) \<\-chan Action](<#SplitStrategy.Compute>)
  - [func \(s \*SplitStrategy\) Name\(\) string](<#SplitStrategy.Name>)
  - [func \(s \*SplitStrategy\) Report\(c \<\-chan \*asset.Snapshot\) \*helper.Report](<#SplitStrategy.Report>)
- [type Strategy](<#Strategy>)
  - [func AllAndStrategies\(strategies \[\]Strategy\) \[\]Strategy](<#AllAndStrategies>)
  - [func AllSplitStrategies\(strategies \[\]Strategy\) \[\]Strategy](<#AllSplitStrategies>)
  - [func AllStrategies\(\) \[\]Strategy](<#AllStrategies>)


## Constants

<a name="DefaultBacktestWorkers"></a>

```go
const (
    // DefaultBacktestWorkers is the default number of backtest workers.
    DefaultBacktestWorkers = 1

    // DefaultLastDays is the default number of days backtest should go back.
    DefaultLastDays = 30

    // DefaultWriteStrategyReports is the default state of writing individual strategy reports.
    DefaultWriteStrategyReports = true
)
```

<a name="ActionSources"></a>
## func [ActionSources](<https://github.com/cinar/indicator/blob/master/strategy/strategy.go#L67>)

```go
func ActionSources(strategies []Strategy, snapshots <-chan *asset.Snapshot) []<-chan Action
```

ActionSources creates a slice of action channels, one for each strategy, where each channel emits actions computed by its corresponding strategy based on snapshots from the provided snapshot channel.

<a name="ActionsToAnnotations"></a>
## func [ActionsToAnnotations](<https://github.com/cinar/indicator/blob/master/strategy/action.go#L46>)

```go
func ActionsToAnnotations(ac <-chan Action) <-chan string
```

ActionsToAnnotations takes a channel of action recommendations and returns a new channel containing corresponding annotations for those actions.

<a name="ComputeWithOutcome"></a>
## func [ComputeWithOutcome](<https://github.com/cinar/indicator/blob/master/strategy/strategy.go#L42>)

```go
func ComputeWithOutcome(s Strategy, c <-chan *asset.Snapshot) (<-chan Action, <-chan float64)
```

ComputeWithOutcome uses the given strategy to processes the provided asset snapshots and generates a stream of actionable recommendations and outcomes.

<a name="CountActions"></a>
## func [CountActions](<https://github.com/cinar/indicator/blob/master/strategy/action.go#L85>)

```go
func CountActions(acs []<-chan Action) (int, int, int, bool)
```

CountActions taken a slice of Action channels, and counts them by their type.

<a name="CountTransactions"></a>
## func [CountTransactions](<https://github.com/cinar/indicator/blob/master/strategy/action.go#L110>)

```go
func CountTransactions(ac <-chan Action) <-chan int
```

CountTransactions counts the number of recommended Buy and Sell actions.

<a name="DenormalizeActions"></a>
## func [DenormalizeActions](<https://github.com/cinar/indicator/blob/master/strategy/action.go#L72>)

```go
func DenormalizeActions(ac <-chan Action) <-chan Action
```

DenormalizeActions simplifies the representation of the action sequence and facilitates subsequent processing by transforming the given channel of actions. It retains Hold actions until the first Buy or Sell action appears. Subsequently, it replaces all remaining Hold actions with the preceding Buy or Sell action, effectively merging consecutive actions.

<a name="NormalizeActions"></a>
## func [NormalizeActions](<https://github.com/cinar/indicator/blob/master/strategy/action.go#L55>)

```go
func NormalizeActions(ac <-chan Action) <-chan Action
```

NormalizeActions transforms the given channel of actions to ensure a consistent and predictable sequence. It eliminates consecutive occurrences of the same action \(Buy/Sell\), ensuring the order follows a pattern of Hold, Buy, Hold, Sell.

<a name="Outcome"></a>
## func [Outcome](<https://github.com/cinar/indicator/blob/master/strategy/outcome.go#L10>)

```go
func Outcome[T helper.Number](values <-chan T, actions <-chan Action) <-chan float64
```

Outcome simulates the potential result of executing the given actions based on the provided values.

<a name="Action"></a>
## type [Action](<https://github.com/cinar/indicator/blob/master/strategy/action.go#L11>)

Action represents the different action categories that a strategy can recommend.

```go
type Action int
```

<a name="Hold"></a>

```go
const (
    // Hold suggests maintaining the current position and not
    // taking any actions on the asset.
    Hold Action = 0

    // Sell suggests disposing of the asset and exiting the current position.
    // This recommendation typically indicates that the strategy believes the
    // asset's price has reached its peak or is likely to decline.
    Sell Action = -1

    // Buy suggests acquiring the asset and entering a new position. This
    // recommendation usually implies that the strategy believes the
    // asset's price is undervalued.
    Buy Action = 1
)
```

<a name="Action.Annotation"></a>
### func \(Action\) [Annotation](<https://github.com/cinar/indicator/blob/master/strategy/action.go#L31>)

```go
func (a Action) Annotation() string
```

Annotation returns a single character string representing the recommended action. It returns "S" for Sell, "B" for Buy, and an empty string for Hold.

<a name="AndStrategy"></a>
## type [AndStrategy](<https://github.com/cinar/indicator/blob/master/strategy/and_strategy.go#L17-L25>)

AndStrategy combines multiple strategies and emits actionable recommendations when \*\*all\*\* strategies in the group \*\*reach the same actionable conclusion\*\*. This can be a conservative approach, potentially delaying recommendations until full consensus is reached.

```go
type AndStrategy struct {
    Strategy

    // Strategies are the group of strategies that will be consulted to make an actionable recommendation.
    Strategies []Strategy
    // contains filtered or unexported fields
}
```

<a name="NewAndStrategy"></a>
### func [NewAndStrategy](<https://github.com/cinar/indicator/blob/master/strategy/and_strategy.go#L28>)

```go
func NewAndStrategy(name string) *AndStrategy
```

NewAndStrategy function initializes an empty and strategies group with the given name.

<a name="AndStrategy.Compute"></a>
### func \(\*AndStrategy\) [Compute](<https://github.com/cinar/indicator/blob/master/strategy/and_strategy.go#L41>)

```go
func (a *AndStrategy) Compute(snapshots <-chan *asset.Snapshot) <-chan Action
```

Compute processes the provided asset snapshots and generates a stream of actionable recommendations.

<a name="AndStrategy.Name"></a>
### func \(\*AndStrategy\) [Name](<https://github.com/cinar/indicator/blob/master/strategy/and_strategy.go#L36>)

```go
func (a *AndStrategy) Name() string
```

Name returns the name of the strategy.

<a name="AndStrategy.Report"></a>
### func \(\*AndStrategy\) [Report](<https://github.com/cinar/indicator/blob/master/strategy/and_strategy.go#L71>)

```go
func (a *AndStrategy) Report(c <-chan *asset.Snapshot) *helper.Report
```

Report processes the provided asset snapshots and generates a report annotated with the recommended actions.

<a name="Backtest"></a>
## type [Backtest](<https://github.com/cinar/indicator/blob/master/strategy/backtest.go#L44-L65>)

Backtest function rigorously evaluates the potential performance of the specified strategies applied to a defined set of assets. It generates comprehensive visual representations for each strategy\-asset pairing.

```go
type Backtest struct {

    // Names is the names of the assets to backtest.
    Names []string

    // Strategies is the list of strategies to apply.
    Strategies []Strategy

    // Workers is the number of concurrent workers.
    Workers int

    // LastDays is the number of days backtest should go back.
    LastDays int

    // WriteStrategyReports indicates whether the individual strategy reports should be generated.
    WriteStrategyReports bool
    // contains filtered or unexported fields
}
```

<a name="NewBacktest"></a>
### func [NewBacktest](<https://github.com/cinar/indicator/blob/master/strategy/backtest.go#L89>)

```go
func NewBacktest(repository asset.Repository, outputDir string) *Backtest
```

NewBacktest function initializes a new backtest instance.

<a name="Backtest.Run"></a>
### func \(\*Backtest\) [Run](<https://github.com/cinar/indicator/blob/master/strategy/backtest.go#L105>)

```go
func (b *Backtest) Run() error
```

Run executes a comprehensive performance evaluation of the designated strategies, applied to a specified collection of assets. In the absence of explicitly defined assets, encompasses all assets within the repository. Likewise, in the absence of explicitly defined strategies, encompasses all the registered strategies.

<a name="BuyAndHoldStrategy"></a>
## type [BuyAndHoldStrategy](<https://github.com/cinar/indicator/blob/master/strategy/buy_and_hold_strategy.go#L16-L18>)

BuyAndHoldStrategy defines an investment approach of acquiring and indefinitely retaining an asset. This strategy primarily serves as a benchmark for evaluating the performance of alternative strategies against a baseline of passive asset ownership.

```go
type BuyAndHoldStrategy struct {
    Strategy
}
```

<a name="NewBuyAndHoldStrategy"></a>
### func [NewBuyAndHoldStrategy](<https://github.com/cinar/indicator/blob/master/strategy/buy_and_hold_strategy.go#L21>)

```go
func NewBuyAndHoldStrategy() *BuyAndHoldStrategy
```

NewBuyAndHoldStrategy function initializes a new buy and hold strategy instance.

<a name="BuyAndHoldStrategy.Compute"></a>
### func \(\*BuyAndHoldStrategy\) [Compute](<https://github.com/cinar/indicator/blob/master/strategy/buy_and_hold_strategy.go#L32>)

```go
func (*BuyAndHoldStrategy) Compute(snapshots <-chan *asset.Snapshot) <-chan Action
```

Compute processes the provided asset snapshots and generates a stream of actionable recommendations.

<a name="BuyAndHoldStrategy.Name"></a>
### func \(\*BuyAndHoldStrategy\) [Name](<https://github.com/cinar/indicator/blob/master/strategy/buy_and_hold_strategy.go#L26>)

```go
func (*BuyAndHoldStrategy) Name() string
```

Name returns the name of the strategy.

<a name="BuyAndHoldStrategy.Report"></a>
### func \(\*BuyAndHoldStrategy\) [Report](<https://github.com/cinar/indicator/blob/master/strategy/buy_and_hold_strategy.go#L56>)

```go
func (b *BuyAndHoldStrategy) Report(c <-chan *asset.Snapshot) *helper.Report
```

Report processes the provided asset snapshots and generates a report annotated with the recommended actions.

<a name="MajorityStrategy"></a>
## type [MajorityStrategy](<https://github.com/cinar/indicator/blob/master/strategy/majority_strategy.go#L13-L21>)

MajorityStrategy emits actionable recommendations aligned with what the strategies in the group recommends.

```go
type MajorityStrategy struct {
    Strategy

    // Strategies are the group of strategies that will be consulted to make an actionable recommendation.
    Strategies []Strategy
    // contains filtered or unexported fields
}
```

<a name="NewMajorityStrategy"></a>
### func [NewMajorityStrategy](<https://github.com/cinar/indicator/blob/master/strategy/majority_strategy.go#L24>)

```go
func NewMajorityStrategy(name string) *MajorityStrategy
```

NewMajorityStrategy function initializes an empty majority strategies group with the given name.

<a name="NewMajorityStrategyWith"></a>
### func [NewMajorityStrategyWith](<https://github.com/cinar/indicator/blob/master/strategy/majority_strategy.go#L29>)

```go
func NewMajorityStrategyWith(name string, strategies []Strategy) *MajorityStrategy
```

NewMajorityStrategyWith function initializes a majority strategies group with the given name and strategies.

<a name="MajorityStrategy.Compute"></a>
### func \(\*MajorityStrategy\) [Compute](<https://github.com/cinar/indicator/blob/master/strategy/majority_strategy.go#L42>)

```go
func (a *MajorityStrategy) Compute(snapshots <-chan *asset.Snapshot) <-chan Action
```

Compute processes the provided asset snapshots and generates a stream of actionable recommendations.

<a name="MajorityStrategy.Name"></a>
### func \(\*MajorityStrategy\) [Name](<https://github.com/cinar/indicator/blob/master/strategy/majority_strategy.go#L37>)

```go
func (a *MajorityStrategy) Name() string
```

Name returns the name of the strategy.

<a name="MajorityStrategy.Report"></a>
### func \(\*MajorityStrategy\) [Report](<https://github.com/cinar/indicator/blob/master/strategy/majority_strategy.go#L70>)

```go
func (a *MajorityStrategy) Report(c <-chan *asset.Snapshot) *helper.Report
```

Report processes the provided asset snapshots and generates a report annotated with the recommended actions.

<a name="OrStrategy"></a>
## type [OrStrategy](<https://github.com/cinar/indicator/blob/master/strategy/or_strategy.go#L14-L22>)

OrStrategy emits actionable recommendations when \*\*at least one\*\* strategy in the group recommends an action \*\*without any conflicting recommendations\*\* from other strategies.

```go
type OrStrategy struct {
    Strategy

    // Strategies are the group of strategies that will be consulted to make an actionable recommendation.
    Strategies []Strategy
    // contains filtered or unexported fields
}
```

<a name="NewOrStrategy"></a>
### func [NewOrStrategy](<https://github.com/cinar/indicator/blob/master/strategy/or_strategy.go#L25>)

```go
func NewOrStrategy(name string) *OrStrategy
```

NewOrStrategy function initializes an empty or strategies group with the given name.

<a name="OrStrategy.Compute"></a>
### func \(\*OrStrategy\) [Compute](<https://github.com/cinar/indicator/blob/master/strategy/or_strategy.go#L38>)

```go
func (a *OrStrategy) Compute(snapshots <-chan *asset.Snapshot) <-chan Action
```

Compute processes the provided asset snapshots and generates a stream of actionable recommendations.

<a name="OrStrategy.Name"></a>
### func \(\*OrStrategy\) [Name](<https://github.com/cinar/indicator/blob/master/strategy/or_strategy.go#L33>)

```go
func (a *OrStrategy) Name() string
```

Name returns the name of the strategy.

<a name="OrStrategy.Report"></a>
### func \(\*OrStrategy\) [Report](<https://github.com/cinar/indicator/blob/master/strategy/or_strategy.go#L66>)

```go
func (a *OrStrategy) Report(c <-chan *asset.Snapshot) *helper.Report
```

Report processes the provided asset snapshots and generates a report annotated with the recommended actions.

<a name="Result"></a>
## type [Result](<https://github.com/cinar/indicator/blob/master/strategy/result.go#L9-L11>)

Result is only used inside the test cases to facilitate the comparison between the actual and expected strategy results.

```go
type Result struct {
    Action Action
}
```

<a name="SplitStrategy"></a>
## type [SplitStrategy](<https://github.com/cinar/indicator/blob/master/strategy/split_strategy.go#L17-L23>)

SplitStrategy leverages two separate strategies. It utilizes the first strategy to identify potential Buy opportunities, and the second strategy to identify potential Sell opportunities. When there is a conflicting recommendation, returns Hold.

```go
type SplitStrategy struct {
    // BuyStrategy is used to identify potential Buy opportunities.
    BuyStrategy Strategy

    // SellStrategy is used to identify potential Sell opportunities.
    SellStrategy Strategy
}
```

<a name="NewSplitStrategy"></a>
### func [NewSplitStrategy](<https://github.com/cinar/indicator/blob/master/strategy/split_strategy.go#L26>)

```go
func NewSplitStrategy(buyStrategy, sellStrategy Strategy) *SplitStrategy
```

NewSplitStrategy function initializes a new split strategy with the given parameters.

<a name="SplitStrategy.Compute"></a>
### func \(\*SplitStrategy\) [Compute](<https://github.com/cinar/indicator/blob/master/strategy/split_strategy.go#L39>)

```go
func (s *SplitStrategy) Compute(snapshots <-chan *asset.Snapshot) <-chan Action
```

Compute processes the provided asset snapshots and generates a stream of actionable recommendations.

<a name="SplitStrategy.Name"></a>
### func \(\*SplitStrategy\) [Name](<https://github.com/cinar/indicator/blob/master/strategy/split_strategy.go#L34>)

```go
func (s *SplitStrategy) Name() string
```

Name returns the name of the strategy.

<a name="SplitStrategy.Report"></a>
### func \(\*SplitStrategy\) [Report](<https://github.com/cinar/indicator/blob/master/strategy/split_strategy.go#L75>)

```go
func (s *SplitStrategy) Report(c <-chan *asset.Snapshot) *helper.Report
```

Report processes the provided asset snapshots and generates a report annotated with the recommended actions.

<a name="Strategy"></a>
## type [Strategy](<https://github.com/cinar/indicator/blob/master/strategy/strategy.go#L27-L38>)

Strategy defines a shared interface for trading strategies.

```go
type Strategy interface {
    // Name returns the name of the strategy.
    Name() string

    // Compute processes the provided asset snapshots and generates a
    // stream of actionable recommendations.
    Compute(snapshots <-chan *asset.Snapshot) <-chan Action

    // Report processes the provided asset snapshots and generates a
    // report annotated with the recommended actions.
    Report(snapshots <-chan *asset.Snapshot) *helper.Report
}
```

<a name="AllAndStrategies"></a>
### func [AllAndStrategies](<https://github.com/cinar/indicator/blob/master/strategy/and_strategy.go#L94>)

```go
func AllAndStrategies(strategies []Strategy) []Strategy
```

AllAndStrategies performs a cartesian product operation on the given strategies, resulting in a collection containing all and strategies formed by combining two strategies together.

<a name="AllSplitStrategies"></a>
### func [AllSplitStrategies](<https://github.com/cinar/indicator/blob/master/strategy/split_strategy.go#L98>)

```go
func AllSplitStrategies(strategies []Strategy) []Strategy
```

AllSplitStrategies performs a cartesian product operation on the given strategies, resulting in a collection containing all split strategies formed by combining individual buy and sell strategies.

<a name="AllStrategies"></a>
### func [AllStrategies](<https://github.com/cinar/indicator/blob/master/strategy/strategy.go#L59>)

```go
func AllStrategies() []Strategy
```

AllStrategies returns a slice containing references to all available base strategies.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
