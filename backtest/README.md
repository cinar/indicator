<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# backtest

```go
import "github.com/cinar/indicator/v2/backtest"
```

Package backtest contains the backtest functions.

This package belongs to the Indicator project. Indicator is a Golang module that supplies a variety of technical indicators, strategies, and a backtesting framework for analysis.

### License

```
Copyright (c) 2021-2024 Onur Cinar.
The source code is provided under GNU AGPLv3 License.
https://github.com/cinar/indicator
```

### Disclaimer

The information provided on this project is strictly for informational purposes and is not to be construed as advice or solicitation to buy or sell any security.

## Index

- [Constants](<#constants>)
- [func RegisterReportBuilder\(name string, builder ReportBuilderFunc\)](<#RegisterReportBuilder>)
- [type Backtest](<#Backtest>)
  - [func NewBacktest\(repository asset.Repository, report Report\) \*Backtest](<#NewBacktest>)
  - [func \(b \*Backtest\) Run\(\) error](<#Backtest.Run>)
- [type DataReport](<#DataReport>)
  - [func NewDataReport\(\) \*DataReport](<#NewDataReport>)
  - [func \(d \*DataReport\) AssetBegin\(name string, strategies \[\]strategy.Strategy\) error](<#DataReport.AssetBegin>)
  - [func \(\*DataReport\) AssetEnd\(\_ string\) error](<#DataReport.AssetEnd>)
  - [func \(\*DataReport\) Begin\(\_ \[\]string, \_ \[\]strategy.Strategy\) error](<#DataReport.Begin>)
  - [func \(\*DataReport\) End\(\) error](<#DataReport.End>)
  - [func \(d \*DataReport\) Write\(assetName string, currentStrategy strategy.Strategy, snapshots \<\-chan \*asset.Snapshot, actions \<\-chan strategy.Action, outcomes \<\-chan float64\) error](<#DataReport.Write>)
- [type DataStrategyResult](<#DataStrategyResult>)
- [type HTMLReport](<#HTMLReport>)
  - [func NewHTMLReport\(outputDir string\) \*HTMLReport](<#NewHTMLReport>)
  - [func \(h \*HTMLReport\) AssetBegin\(name string, strategies \[\]strategy.Strategy\) error](<#HTMLReport.AssetBegin>)
  - [func \(h \*HTMLReport\) AssetEnd\(name string\) error](<#HTMLReport.AssetEnd>)
  - [func \(h \*HTMLReport\) Begin\(assetNames \[\]string, \_ \[\]strategy.Strategy\) error](<#HTMLReport.Begin>)
  - [func \(h \*HTMLReport\) End\(\) error](<#HTMLReport.End>)
  - [func \(h \*HTMLReport\) Write\(assetName string, currentStrategy strategy.Strategy, snapshots \<\-chan \*asset.Snapshot, actions \<\-chan strategy.Action, outcomes \<\-chan float64\) error](<#HTMLReport.Write>)
- [type Report](<#Report>)
  - [func NewReport\(name, config string\) \(Report, error\)](<#NewReport>)
- [type ReportBuilderFunc](<#ReportBuilderFunc>)


## Constants

<a name="DefaultBacktestWorkers"></a>

```go
const (
    // DefaultBacktestWorkers is the default number of backtest workers.
    DefaultBacktestWorkers = 1

    // DefaultLastDays is the default number of days backtest should go back.
    DefaultLastDays = 365
)
```

<a name="DefaultWriteStrategyReports"></a>

```go
const (
    // DefaultWriteStrategyReports is the default state of writing individual strategy reports.
    DefaultWriteStrategyReports = true
)
```

<a name="HTMLReportBuilderName"></a>

```go
const (
    // HTMLReportBuilderName is the name for the HTML report builder.
    HTMLReportBuilderName = "html"
)
```

<a name="RegisterReportBuilder"></a>
## func [RegisterReportBuilder](<https://github.com/cinar/indicator/blob/master/backtest/report_factory.go#L25>)

```go
func RegisterReportBuilder(name string, builder ReportBuilderFunc)
```

RegisterReportBuilder registers the given builder.

<a name="Backtest"></a>
## type [Backtest](<https://github.com/cinar/indicator/blob/master/backtest/backtest.go#L43-L64>)

Backtest function rigorously evaluates the potential performance of the specified strategies applied to a defined set of assets. It generates comprehensive visual representations for each strategy\-asset pairing.

```go
type Backtest struct {

    // Names is the names of the assets to backtest.
    Names []string

    // Strategies is the list of strategies to apply.
    Strategies []strategy.Strategy

    // Workers is the number of concurrent workers.
    Workers int

    // LastDays is the number of days backtest should go back.
    LastDays int

    // Logger is the slog logger instance.
    Logger *slog.Logger
    // contains filtered or unexported fields
}
```

<a name="NewBacktest"></a>
### func [NewBacktest](<https://github.com/cinar/indicator/blob/master/backtest/backtest.go#L67>)

```go
func NewBacktest(repository asset.Repository, report Report) *Backtest
```

NewBacktest function initializes a new backtest instance.

<a name="Backtest.Run"></a>
### func \(\*Backtest\) [Run](<https://github.com/cinar/indicator/blob/master/backtest/backtest.go#L83>)

```go
func (b *Backtest) Run() error
```

Run executes a comprehensive performance evaluation of the designated strategies, applied to a specified collection of assets. In the absence of explicitly defined assets, encompasses all assets within the repository. Likewise, in the absence of explicitly defined strategies, encompasses all the registered strategies.

<a name="DataReport"></a>
## type [DataReport](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L32-L35>)

DataReport is the bactest data report enablign programmatic access to the backtest results.

```go
type DataReport struct {
    // Results are the backtest results for the assets.
    Results map[string][]*DataStrategyResult
}
```

<a name="NewDataReport"></a>
### func [NewDataReport](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L38>)

```go
func NewDataReport() *DataReport
```

NewDataReport initializes a new data report instance.

<a name="DataReport.AssetBegin"></a>
### func \(\*DataReport\) [AssetBegin](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L50>)

```go
func (d *DataReport) AssetBegin(name string, strategies []strategy.Strategy) error
```

AssetBegin is called when backtesting for the given asset begins.

<a name="DataReport.AssetEnd"></a>
### func \(\*DataReport\) [AssetEnd](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L79>)

```go
func (*DataReport) AssetEnd(_ string) error
```

AssetEnd is called when backtesting for the given asset ends.

<a name="DataReport.Begin"></a>
### func \(\*DataReport\) [Begin](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L45>)

```go
func (*DataReport) Begin(_ []string, _ []strategy.Strategy) error
```

Begin is called when the backtest begins.

<a name="DataReport.End"></a>
### func \(\*DataReport\) [End](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L84>)

```go
func (*DataReport) End() error
```

End is called when the backtest ends.

<a name="DataReport.Write"></a>
### func \(\*DataReport\) [Write](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L56>)

```go
func (d *DataReport) Write(assetName string, currentStrategy strategy.Strategy, snapshots <-chan *asset.Snapshot, actions <-chan strategy.Action, outcomes <-chan float64) error
```

Write writes the given strategy actions and outomes to the report.

<a name="DataStrategyResult"></a>
## type [DataStrategyResult](<https://github.com/cinar/indicator/blob/master/backtest/data_report.go#L14-L29>)

DataStrategyResult is the strategy result.

```go
type DataStrategyResult struct {
    // Asset is the asset name.
    Asset string

    // Strategy is the strategy instnace.
    Strategy strategy.Strategy

    // Outcome is the strategy outcome.
    Outcome float64

    // Action is the final action recommended by the strategy.
    Action strategy.Action

    // Transactions are the action recommendations.
    Transactions []strategy.Action
}
```

<a name="HTMLReport"></a>
## type [HTMLReport](<https://github.com/cinar/indicator/blob/master/backtest/html_report.go#L36-L56>)

HTMLReport is the backtest HTML report.

```go
type HTMLReport struct {
    Report

    // WriteStrategyReports indicates whether the individual strategy reports should be generated.
    WriteStrategyReports bool

    // DateFormat is the date format that is used in the reports.
    DateFormat string

    // Logger is the slog logger instance.
    Logger *slog.Logger
    // contains filtered or unexported fields
}
```

<a name="NewHTMLReport"></a>
### func [NewHTMLReport](<https://github.com/cinar/indicator/blob/master/backtest/html_report.go#L80>)

```go
func NewHTMLReport(outputDir string) *HTMLReport
```

NewHTMLReport initializes a new HTML report instance.

<a name="HTMLReport.AssetBegin"></a>
### func \(\*HTMLReport\) [AssetBegin](<https://github.com/cinar/indicator/blob/master/backtest/html_report.go#L104>)

```go
func (h *HTMLReport) AssetBegin(name string, strategies []strategy.Strategy) error
```

AssetBegin is called when backtesting for the given asset begins.

<a name="HTMLReport.AssetEnd"></a>
### func \(\*HTMLReport\) [AssetEnd](<https://github.com/cinar/indicator/blob/master/backtest/html_report.go#L159>)

```go
func (h *HTMLReport) AssetEnd(name string) error
```

AssetEnd is called when backtesting for the given asset ends.

<a name="HTMLReport.Begin"></a>
### func \(\*HTMLReport\) [Begin](<https://github.com/cinar/indicator/blob/master/backtest/html_report.go#L91>)

```go
func (h *HTMLReport) Begin(assetNames []string, _ []strategy.Strategy) error
```

Begin is called when the backtest starts.

<a name="HTMLReport.End"></a>
### func \(\*HTMLReport\) [End](<https://github.com/cinar/indicator/blob/master/backtest/html_report.go#L188>)

```go
func (h *HTMLReport) End() error
```

End is called when the backtest ends.

<a name="HTMLReport.Write"></a>
### func \(\*HTMLReport\) [Write](<https://github.com/cinar/indicator/blob/master/backtest/html_report.go#L116>)

```go
func (h *HTMLReport) Write(assetName string, currentStrategy strategy.Strategy, snapshots <-chan *asset.Snapshot, actions <-chan strategy.Action, outcomes <-chan float64) error
```

Write writes the given strategy actions and outomes to the report.

<a name="Report"></a>
## type [Report](<https://github.com/cinar/indicator/blob/master/backtest/report.go#L13-L28>)

Report is the backtest report interface.

```go
type Report interface {
    // Begin is called when the backtest begins.
    Begin(assetNames []string, strategies []strategy.Strategy) error

    // AssetBegin is called when backtesting for the given asset begins.
    AssetBegin(name string, strategies []strategy.Strategy) error

    // Write writes the given strategy actions and outomes to the report.
    Write(assetName string, currentStrategy strategy.Strategy, snapshots <-chan *asset.Snapshot, actions <-chan strategy.Action, outcomes <-chan float64) error

    // AssetEnd is called when backtesting for the given asset ends.
    AssetEnd(name string) error

    // End is called when the backtest ends.
    End() error
}
```

<a name="NewReport"></a>
### func [NewReport](<https://github.com/cinar/indicator/blob/master/backtest/report_factory.go#L30>)

```go
func NewReport(name, config string) (Report, error)
```

NewReport builds a new report by the given name type and the configuration.

<a name="ReportBuilderFunc"></a>
## type [ReportBuilderFunc](<https://github.com/cinar/indicator/blob/master/backtest/report_factory.go#L17>)

ReportBuilderFunc defines a function to build a new report using the given configuration parameter.

```go
type ReportBuilderFunc func(config string) (Report, error)
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
